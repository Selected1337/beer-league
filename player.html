<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <title>Player Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen">
  <main class="max-w-5xl mx-auto">
    <!-- Banner -->
    <div class="relative">
      <img id="team-banner" src="https://placehold.co/1200x400" class="w-full object-cover rounded-b-lg shadow" />
      <div id="banner-overlay" class="absolute top-4 left-6 flex items-center gap-4 bg-white/90 dark:bg-black/80 p-4 rounded shadow">
        <img id="player-head" class="w-20 h-20 rounded-full border-4 border-gray-300" />
        <div>
          <h1 id="player-name" class="text-3xl font-bold text-black dark:text-white"></h1>
          <div class="flex gap-2 text-lg text-gray-700 dark:text-gray-300 items-center">
            <img id="team-logo" class="w-6 h-6" />
            <span id="player-team" class="uppercase font-bold"></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="grid md:grid-cols-2 gap-6 px-6 py-10">
      <div class="bg-gray-100 dark:bg-card rounded-lg shadow p-6 text-sm space-y-6">
        <h2 class="text-xl font-bold mb-2">2024-25 Season</h2>
        <div class="grid grid-cols-3 sm:grid-cols-6 gap-2 text-center">
          <div><span class="font-bold text-xl" id="stat-gp">0</span><div class="text-xs">GP</div></div>
          <div><span class="font-bold text-xl" id="stat-goals">0</span><div class="text-xs">Goals</div></div>
          <div><span class="font-bold text-xl" id="stat-assists">0</span><div class="text-xs">Assists</div></div>
          <div><span class="font-bold text-xl" id="stat-pts">0</span><div class="text-xs">Points</div></div>
          <div><span class="font-bold text-xl" id="stat-hits">0</span><div class="text-xs">Hits</div></div>
          <div><span class="font-bold text-xl" id="stat-touches">0</span><div class="text-xs">Touches</div></div>
        </div>
      </div>
    </div>

    <div class="text-center mb-10">
      <a href="index.html" class="text-blue-500 hover:underline">&larr; Back to stats</a>
    </div>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    const name = params.get("name");

    fetch("team_logos.json")
  .then(res => res.json())
  .then(logos => {
    const team = player.team;
    const info = logos[team];

    if (info) {
      document.getElementById("player-team").textContent = info.name;
      document.getElementById("team-logo").src = info.logo;
      document.getElementById("team-banner").src = info.banner;
      document.body.style.backgroundColor = info.color + "22";
    }
  });

    if (!name) {
      document.body.innerHTML = '<div class="text-center text-white text-2xl mt-20">Player not found.</div>';
    } else {
      document.getElementById("player-head").src = `https://minotar.net/avatar/${name}/100.png`;
      document.getElementById("player-name").textContent = name;

      fetch("player_stats.json")
        .then(res => res.json())
        .then(data => {
          const player = Array.isArray(data)
            ? data.find(p => p.player === name)
            : data[name];

          if (!player) {
            document.body.innerHTML = '<div class="text-center text-white text-2xl mt-20">Player not found.</div>';
            return;
          }

          const team = player.team;
          document.getElementById("player-team").textContent = team;

          // Inject colors and logo
          const style = teamStyles[team];
          if (style) {
            document.getElementById("team-logo").src = style.logo;
            document.getElementById("team-banner").src = style.banner;
            document.querySelector("body").style.backgroundColor = style.color + "22";
          }

          // Stats
          document.getElementById("stat-gp").textContent = player.gamesPlayed ?? 0;
          document.getElementById("stat-goals").textContent = player.goals ?? 0;
          document.getElementById("stat-assists").textContent = player.assists ?? 0;
          document.getElementById("stat-pts").textContent = (player.goals + player.assists) ?? 0;
          document.getElementById("stat-hits").textContent = player.hits ?? 0;
          document.getElementById("stat-touches").textContent = player.touches ?? 0;
        });
    }
  </script>
</body>
</html>
